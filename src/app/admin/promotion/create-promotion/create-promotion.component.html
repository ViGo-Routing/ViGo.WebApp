<div class="modal-header">
  <h2 class="modal-title">Thêm mới khuyến mãi</h2>
  <i
    (click)="cancel()"
    aria-label="Close"
    class="btn-close"
    data-bs-dismiss="modal"
  ></i>
</div>
<div class="modal-body">
  <form
    [formGroup]="editForm"
    class=""
    #myForm="ngForm"
    (ngSubmit)="onSubmit()"
  >
    <div class="row row-sm">
      <div class="col-xl-6 col-lg-12 col-md-12 input-infor">
        <mat-form-field appearance="outline">
          <mat-label>Mã khuyến mãi</mat-label>
          <input matInput type="text" formControlName="code" required />
          <mat-error
            *ngIf="
              editForm.controls['code'].invalid &&
              editForm.controls['code'].touched
            "
          >
            Mã khuyến mãi là bắt buộc
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Tên khuyến mãi</mat-label>
          <input matInput type="text" formControlName="name" required />
          <mat-error
            *ngIf="
              editForm.controls['name'].invalid &&
              editForm.controls['name'].touched
            "
          >
            Tên khuyến mãi là bắt buộc
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Mô tả</mat-label>
          <input matInput type="text" formControlName="description" required />
          <mat-error
            *ngIf="
              editForm.controls['description'].invalid &&
              editForm.controls['description'].touched
            "
          >
            Mô tả là bắt buộc
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Số Tiền Chiết Khấu</mat-label>
          <input
            matInput
            type="number"
            formControlName="discountAmount"
            required
          />
          <mat-error
            *ngIf="
              editForm.controls['discountAmount'].invalid &&
              editForm.controls['discountAmount'].touched
            "
          >
            Số Tiền Chiết Khấu là phần bắt buộc
          </mat-error>
        </mat-form-field>
        <div style="height: 16%; padding: 10px">
          <mat-checkbox formControlName="isPercentage" required
            >Tỷ lệ phần trăm</mat-checkbox
          >
        </div>

        <mat-form-field appearance="outline">
          <mat-label> Giảm tối đa</mat-label>
          <input
            matInput
            type="number"
            formControlName="maxDecrease"
            required
          />
          <mat-error
            *ngIf="
              editForm.controls['maxDecrease'].invalid &&
              editForm.controls['maxDecrease'].touched
            "
          >
            Giảm tối đa là phần bắt buộc
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Phương tiện</mat-label>
          <mat-select matInput formControlName="vehicleTypeId" required>
            <mat-option *ngFor="let type of vehicleType" [value]="type.id">
              {{ type.name }}
            </mat-option>
          </mat-select>
          <mat-error
            *ngIf="
              editForm.controls['vehicleTypeId'].invalid &&
              editForm.controls['vehicleTypeId'].touched
            "
          >
            Phương tiện là phần bắt buộc
          </mat-error>
        </mat-form-field>
      </div>

      <div class="col-xl-6 col-lg-12 col-md-12 input-infor">
        <mat-form-field appearance="outline">
          <mat-label>Ngày bắt đầu</mat-label>
          <input
            matInput
            [matDatepicker]="startTimePicker"
            formControlName="startTime"
            required
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="startTimePicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #startTimePicker></mat-datepicker>
          <mat-error
            *ngIf="
              editForm.controls['startTime'].invalid &&
              editForm.controls['startTime'].touched
            "
          >
            Ngày bắt đầu là phần bắt buộc
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Ngày hết hạn</mat-label>
          <input
            matInput
            [matDatepicker]="expireTimePicker"
            formControlName="expireTime"
            required
          />
          <mat-datepicker-toggle
            matSuffix
            [for]="expireTimePicker"
          ></mat-datepicker-toggle>
          <mat-datepicker #expireTimePicker></mat-datepicker>
          <mat-error
            *ngIf="
              editForm.controls['expireTime'].invalid &&
              editForm.controls['expireTime'].touched
            "
          >
            Ngày hết hạn là phần bắt buộc
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Tổng số sử dụng</mat-label>
          <input
            matInput
            type="number"
            formControlName="maxTotalUsage"
            required
          />
          <mat-error
            *ngIf="
              editForm.controls['maxTotalUsage'].invalid &&
              editForm.controls['maxTotalUsage'].touched
            "
          >
            Tổng số sử dụng là phần bắt buộc
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Mức sử dụng trên mỗi người dùng</mat-label>
          <input
            matInput
            type="number"
            formControlName="usagePerUser"
            required
          />
          <mat-error
            *ngIf="
              editForm.controls['usagePerUser'].invalid &&
              editForm.controls['usagePerUser'].touched
            "
          >
            Mức sử dụng trên mỗi người dùng là phần bắt buộc
          </mat-error>
        </mat-form-field>
        <mat-form-field appearance="outline">
          <mat-label>Với đơn trên</mat-label>
          <input
            matInput
            type="number"
            placeholder="VND"
            formControlName="minTotalPrice"
            required
          />
          <mat-error
            *ngIf="
              editForm.controls['minTotalPrice'].invalid &&
              editForm.controls['minTotalPrice'].touched
            "
          >
            Với đơn trên là phần bắt buộc
          </mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Trạng thái</mat-label>
          <mat-select formControlName="status" required>
            <mat-option value="UNAVAILABLE">Unavailable</mat-option>
            <mat-option value="AVAILABLE">Available</mat-option>
          </mat-select>
          <mat-error
            *ngIf="
              editForm.controls['status'].invalid &&
              editForm.controls['status'].touched
            "
          >
            Status is required
          </mat-error>
        </mat-form-field>
      </div>
    </div>
    <div class="modal-footer">
      <button
        id="btnCancel"
        mat-raised-button
        class="btn negative"
        (click)="cancel()"
      >
        Hủy
      </button>
      <button
        id="btnSave"
        class="btn positive"
        mat-raised-button
        (click)="create()"
        [disabled]="!editForm.valid"
      >
        Lưu
      </button>
    </div>
  </form>
</div>
